---
title: 321原则-落实数据安全
date: 2025-09-06 18:11:36
tags:
---

## 前情提要

发生该[事故](https://huanyp.cn/2025/09/06/%E6%8A%80%E6%9C%AF/%E5%BC%80%E6%BA%90/NcatBot%20%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E9%87%8D%E5%A4%A7%E5%AE%89%E5%85%A8%E4%BA%8B%E6%95%85%E5%9B%9E%E9%A1%BE/)后，NcatBot 为了避免被卷入有关风波，进行了删库操作以紧急避险。由于是首次遇到此类事件，应对经验不足，导致丢失了约 6h 的工作代码，同时也切实反映出数据安全的重要性。

本文就 321 原则，提供一个 Windows 操作系统下简易但切实可行的数据安全方案。

## 什么是 321 原则？

321 原则是一种广泛应用于数据备份和数据安全领域的最佳实践。其核心思想是：

- **3**：至少保留 3 份数据副本（包括原始数据和备份）。
- **2**：将数据存储在 2 种不同的介质上（如硬盘、移动硬盘、云存储等）。
- **1**：至少有 1 份备份存放在异地（如云端或物理隔离的地点）。

通过遵循 321 原则，即使遇到硬件故障、误操作、自然灾害或勒索软件攻击等突发事件，也能最大程度地保障数据的完整性和可恢复性。这一原则简单易行，适用于个人用户、小型团队以及企业级的数据安全需求。

## 情况简析

对于个人开发者来说，三种情况的概率排序为 误操作 >> 硬件故障 > 其他所有情况。如果是开源代码，那么数据的 safety（数据完整性与可恢复性）要求是远大于 security（数据保密性与防止未授权访问）要求的

## Local-History: 简单粗暴的第一道防线

Local-History 是 Visual Studio Code 编辑器的一个插件，它能够自动记录你对文件的每次修改，形成本地的版本历史。这是防范误操作的第一道防线，简单粗暴但非常有效。

### 插件安装与配置

1. 在 VSCode 中搜索并安装 "Local History" 插件
2. 插件会自动开始工作，建议 `ctrl+,` 找到 `saveDelay` 设置为 15s 或者 30s（连续多长时间无更改就保存），提高空间效率。

### 工作原理

- 每当你保存文件时，插件会自动创建一个副本存储在本地
- 历史记录按时间戳组织，可以轻松查看和恢复任意时间点的文件状态
- 支持文件对比，可以清晰看到每次修改的具体内容

### 实际使用

当发生误操作时，你可以：
1. 右键点击文件，选择 "Local History" 
2. 查看该文件的历史版本列表
3. 选择需要恢复的版本进行对比或直接恢复

这种方式虽然简单，但对于日常的误删、误改等操作具有极强的防护作用。它属于 321 原则中的"本地备份"部分，为我们的数据安全提供了第一层保障。
